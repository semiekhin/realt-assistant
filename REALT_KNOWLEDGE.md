# Realt Assistant ‚Äî –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π

## üîë –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –∑–Ω–∞–Ω–∏—è

### 1. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ python
```bash
# –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û ‚Äî venv –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ
nohup python run_polling.py &

# –ü–†–ê–í–ò–õ–¨–ù–û ‚Äî –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä—É
cd /opt/realt-assistant
/opt/realt-assistant/venv/bin/python -u run_polling.py > bot.log 2>&1 &
```

–ü–æ—á–µ–º—É: –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —á–µ—Ä–µ–∑ nohup –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–π python –±–µ–∑ –Ω—É–∂–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫.

### 2. JSON –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å .format()
–í –ø—Ä–æ–º–ø—Ç–∞—Ö —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ JSON –º–Ω–æ–≥–æ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–æ–∫, –æ–Ω–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç —Å Python .format(). –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å .replace() –≤–º–µ—Å—Ç–æ .format().

### 3. –ü–∞—Ä—Å–∏–Ω–≥ JSON –æ—Ç LLM ‚Äî regex –Ω–∞–¥—ë–∂–Ω–µ–µ
LLM –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å markdown-–æ–±—ë—Ä—Ç–∫—É –∏–ª–∏ —Ç–µ–∫—Å—Ç –≤–æ–∫—Ä—É–≥ JSON. –ù—É–∂–Ω–æ —É–±—Ä–∞—Ç—å ```json –∏ –Ω–∞–π—Ç–∏ JSON —á–µ—Ä–µ–∑ regex.

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ ‚Äî grep –ø–æ –ø—É—Ç–∏
```bash
# –¢–æ—á–Ω—ã–π –ø–æ–∏—Å–∫ –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞
ps aux | grep "realt-assistant" | grep -v grep
```

### 5. –î—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ ‚Äî –ù–ï –¢–†–û–ì–ê–¢–¨
- /opt/bot ‚Äî RIZALTA PROD (–ø–æ—Ä—Ç 8000)
- /opt/bot-dev ‚Äî RIZALTA DEV (–ø–æ—Ä—Ç 8002)
- /opt/sofia-claude, /opt/sofia-gpt

–ü—Ä–∏ pkill –≤—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π –ø—É—Ç—å:
```bash
pkill -f "realt-assistant.*run_polling"
```

### 6. Vision-first –ø–∞—Ä—Å–∏–Ω–≥ ‚Äî –∫–ª—é—á–µ–≤–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ v0.4.0
–°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ —Ç–µ—Ä—è–ª –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏ —Ç–∞–±–ª–∏—Ü—ã (—Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç). –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥: PDF —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤ JPEG —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ GPT-4o Vision. –¢–µ–ø–µ—Ä—å –≤–∏–¥–∏–º –ø—Ä–∞–π—Å—ã, –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∏, —Ç–∞–±–ª–∏—Ü—ã.

### 7. –ó–∞–ø—Ä–µ—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π –≤ –ø—Ä–æ–º–ø—Ç–µ
–î–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ–º–ø—Ç: "–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö ‚Äî —Å—Ç–∞–≤—å null. –ó–ê–ü–†–ï–©–ï–ù–û –≤—ã–¥—É–º—ã–≤–∞—Ç—å —Ü–∏—Ñ—Ä—ã, –ø—Ä–æ—Ü–µ–Ω—Ç—ã, —Å—É–º–º—ã."
–†–µ–∑—É–ª—å—Ç–∞—Ç: –ö–æ–º–∏—Å—Å–∏—è –∫–æ—Ç–æ—Ä–æ–π –Ω–µ –±—ã–ª–æ —Å—Ç–∞–ª–∞ null –≤–º–µ—Å—Ç–æ –≤—ã–¥—É–º–∞–Ω–Ω—ã—Ö 3%.

### 8. –ú–µ—Ç–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –í–ù–£–¢–†–ò –∫–ª–∞—Å—Å–∞
cat >> –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ –í–ù–ï –∫–ª–∞—Å—Å–∞. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Python —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –º–µ—Ç–æ–¥–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞.

---

## üõ† –ß–∞—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ó–∞–ø—É—Å–∫ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
cd /opt/realt-assistant
/opt/realt-assistant/venv/bin/python -u run_polling.py > bot.log 2>&1 &
pkill -f "realt-assistant.*run_polling"
ps aux | grep "realt-assistant" | grep -v grep
```

### –õ–æ–≥–∏
```bash
tail -f /opt/realt-assistant/bot.log
tail -50 /opt/realt-assistant/bot.log
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
sqlite3 /opt/realt-assistant/data/assistant.db "SELECT id, name, price_min, price_max FROM properties;"
sqlite3 /opt/realt-assistant/data/assistant.db "SELECT raw_data FROM properties WHERE id=9;" | python -m json.tool
```

### –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î
```bash
sqlite3 /opt/realt-assistant/data/assistant.db "ALTER TABLE properties ADD COLUMN new_field TEXT;"
```

### Git
```bash
cd /opt/realt-assistant
git add -A && git status
git commit -m "–æ–ø–∏—Å–∞–Ω–∏–µ"
git push
```

---

## üêõ –†–µ—à—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ ‚Äî –±–æ—Ç –≤—ã–¥—É–º—ã–≤–∞–µ—Ç –∫–æ–º–∏—Å—Å–∏—é
–ü—Ä–∏—á–∏–Ω–∞: –ü—Ä–æ–º–ø—Ç –Ω–µ –∑–∞–ø—Ä–µ—â–∞–ª –≤—ã–¥—É–º—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
–†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ–º–ø—Ç —è–≤–Ω—ã–π –∑–∞–ø—Ä–µ—Ç –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é —Å—Ç–∞–≤–∏—Ç—å null

### –¶–µ–Ω—ã 33.7-33.7 –≤–º–µ—Å—Ç–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ 21-58 –º–ª–Ω
–ü—Ä–∏—á–∏–Ω–∞: PDF –ø–∞—Ä—Å–∏–ª—Å—è –∫–∞–∫ —Ç–µ–∫—Å—Ç, –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Å —Ü–µ–Ω–∞–º–∏ —Ç–µ—Ä—è–ª–∏—Å—å
–†–µ—à–µ–Ω–∏–µ: Vision-first –ø–∞—Ä—Å–µ—Ä (parser_v2.py) ‚Äî PDF –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ GPT-4o

### Property object has no attribute to_full_info
–ü—Ä–∏—á–∏–Ω–∞: –ú–µ—Ç–æ–¥ –¥–æ–±–∞–≤–∏–ª—Å—è –≤–Ω–µ –∫–ª–∞—Å—Å–∞ —á–µ—Ä–µ–∑ cat >>
–†–µ—à–µ–Ω–∏–µ: Python —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –º–µ—Ç–æ–¥–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ

### –§–∞–π–ª—ã —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –¥–≤–∞–∂–¥—ã
–ü—Ä–∏—á–∏–Ω–∞: –ó–∞–ø—É—â–µ–Ω–æ 2 –ø—Ä–æ—Ü–µ—Å—Å–∞ –±–æ—Ç–∞
–†–µ—à–µ–Ω–∏–µ: ps aux | grep realt-assistant –∏ kill –ª–∏—à–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å

### IndentationError –ø–æ—Å–ª–µ sed
–ü—Ä–∏—á–∏–Ω–∞: sed –≤—Å—Ç–∞–≤–ª—è–µ—Ç \\n –±—É–∫–≤–∞–ª—å–Ω–æ, –ª–æ–º–∞–µ—Ç –æ—Ç—Å—Ç—É–ø—ã Python
–†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Python —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∞–≤–æ–∫

### ModuleNotFoundError No module named fitz
–ü—Ä–∏—á–∏–Ω–∞: –ó–∞–ø—É—Å–∫ –±–µ–∑ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ venv
–†–µ—à–µ–Ω–∏–µ: –ü–æ–ª–Ω—ã–π –ø—É—Ç—å /opt/realt-assistant/venv/bin/python

---

## üìê –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### Vision-first –ø–∞—Ä—Å–∏–Ω–≥ (v0.4.0)
–ë—ã–ª–æ: PDF —á–µ—Ä–µ–∑ PyMuPDF.get_text() ‚Äî —Ç–µ—Ä—è–µ–º –∫–∞—Ä—Ç–∏–Ω–∫–∏
–°—Ç–∞–ª–æ: PDF –∫–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞–∫ JPEG –≤ GPT-4o Vision
–ü–æ—á–µ–º—É: –ü—Ä–∞–π—Å—ã, –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∏, —Ç–∞–±–ª–∏—Ü—ã —á–∞—Å—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ PDF.

### –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –¥–∞–Ω–Ω—ã–º (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
SQLite –¥–ª—è —á–∏—Å–µ–ª (–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã, —Ñ–∏–ª—å—Ç—Ä—ã) + RAG –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (–ö–ü, –≤–æ–ø—Ä–æ—Å—ã).
–ü–æ—á–µ–º—É: –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞–º –Ω—É–∂–Ω—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —á–∏—Å–ª–∞, –∞ –ö–ü –Ω—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç.

### Content Composer + Renderer
–ë—ã–ª–æ: –î–∞–Ω–Ω—ã–µ –≤ —à–∞–±–ª–æ–Ω –Ω–∞–ø—Ä—è–º—É—é
–°—Ç–∞–ª–æ: –î–∞–Ω–Ω—ã–µ –≤ LLM –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–¥–∞—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç, –ø–æ—Ç–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
–ü–æ—á–µ–º—É: LLM –ø–æ–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç, —É–±–∏—Ä–∞–µ—Ç –º—É—Å–æ—Ä, –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–¥–∞—é—â–∏–π —Ç–µ–∫—Å—Ç.

---

## üìä –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö Property (v0.4.0)

–û—Å–Ω–æ–≤–Ω–æ–µ: name, address, city, developer, completion_date

–¶–µ–Ω—ã: price_min, price_max, price_per_sqm_min, price_per_sqm_max

–ö–≤–∞—Ä—Ç–∏—Ä—ã: apartment_types, area_min, area_max

–£—Å–ª–æ–≤–∏—è: payment_options, installment_terms, mortgage_info, commission

–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–∞—Å—Å—Ä–æ—á–∫–∞: installment_min_pv, installment_max_months, installment_markup

–õ–æ–∫–∞—Ü–∏—è (NEW v0.4.0): distance_to_sea, territory_area, hotel_operator

–ö–æ–Ω—Ç–µ–Ω—Ç: description, features, raw_data

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

GitHub: https://github.com/semiekhin/realt-assistant
OpenAI API: https://platform.openai.com/
Telegram Bot API: https://core.telegram.org/bots/api
ReportLab docs: https://docs.reportlab.com/
PyMuPDF fitz: https://pymupdf.readthedocs.io/
